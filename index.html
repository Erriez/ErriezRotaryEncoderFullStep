<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Erriez Full step Rotary Encoder: 3 speed Rotary Encoder Full Step library for Arduino</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="RotaryEncoder.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Erriez Full step Rotary Encoder
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">Three speed Full Step Rotary Encoder Library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">3 speed Rotary Encoder Full Step library for Arduino </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/Erriez/ErriezRotaryEncoderFullStep"></a></p>
<p>This is an optimized three speed Rotary Encoder library for Arduino which supports:</p>
<ul>
<li>Full step Rotary Encoder types.</li>
<li>Detect three rotation speeds.</li>
<li>Configurable rotation speed sensitivity.</li>
<li>Polling and interrupt based.</li>
<li>Single or multiple Rotary Encoders.</li>
<li>Optional Rotary button.</li>
<li>Pin state table in flash.</li>
</ul>
<div class="image">
<img src="https://raw.githubusercontent.com/Erriez/ErriezRotaryEncoderFullStep/master/extras/RotaryEncoder.png"  alt="Rotary encoder"/>
</div>
<h2>Full step / half step Rotary Encoders</h2>
<p>The difference between a full step or half step Rotary Encoder type is how the data signals of the two pins are generated. It depends on the mechanical construction of the notches and contacts inside the Rotary Encoder.</p>
<p>Please refer to the <a href="https://github.com/Erriez/ErriezRotaryEncoderHalfStep">ErriezRotaryEncoderHalfStep</a> library for half step Rotary Encoders. Experiment with the half step and full step libraries which works optimal for your Rotary Encoder.</p>
<h2>Hardware</h2>
<p>Connect the two rotary pins to the DIGITAL pins of an Arduino board.</p>
<p>A third rotary button pin is not used in the Rotary library, but can be used in the sketch.</p>
<p>Tested with Arduino IDE v1.8.5 on hardware:</p>
<ul>
<li>Arduino UNO</li>
<li>Arduino Nano</li>
<li>Arduino Micro</li>
<li>Arduino Pro or Pro Mini</li>
<li>Arduino Mega or Mega2560</li>
<li>Arduino Leonardo</li>
<li>WeMos D1 R2 &amp; mini (ESP8266)</li>
</ul>
<h3>Interrupts</h3>
<p>Both rotary pins must be connected to a DIGITAL pin with interrupt support, such as <code>INT0</code> or <code>INT1</code>. This is chip specific. Please refer to the documentation of your board or <a href="https://www.arduino.cc/reference/en/language/functions/external-interrupts/attachinterrupt/">attachInterrupt()</a>.</p>
<h3>Arduino UNO hardware</h3>
<p>The connection below can be used for polled and interrupts. An optional button pin can be connected to DIGITAL pin 4.</p>
<div class="image">
<img src="https://raw.githubusercontent.com/Erriez/ErriezRotaryEncoderFullStep/master/extras/FritzingRotary.png"  alt="alt text" title="3-pin Rotary Encoder Arduino connection"/>
</div>
<table class="doxtable">
<tr>
<th align="center">Rotary pin </th><th align="center">Arduino UNO/NANO/Mega2560/Leonardo board  </th></tr>
<tr>
<td align="center">1 </td><td align="center">DIGITAL pin 2 (INT0) </td></tr>
<tr>
<td align="center">2 </td><td align="center">DIGITAL pin 3 (INT1) </td></tr>
<tr>
<td align="center">Button (optional) </td><td align="center">DIGITAL pin 4 </td></tr>
<tr>
<td align="center">GND </td><td align="center">GND </td></tr>
</table>
<h3>Arduino WeMos D1 R2 &amp; mini (ESP8266) hardware</h3>
<p>Note that some ESP8266 pins mixes ESP8622 GPIO pins with Arduino digital pins. Connect a Rotary Encoder to the following pins which can be used with polled and interrupt examples:</p>
<table class="doxtable">
<tr>
<th align="center">Rotary pin </th><th align="center">ESP8622 pin </th><th align="center">Text on board / WeMos D1 &amp; R2  </th></tr>
<tr>
<td align="center">1 </td><td align="center">GPIO13 </td><td align="center">D7 (MOSI) </td></tr>
<tr>
<td align="center">2 </td><td align="center">GPIO12 </td><td align="center">D6 (MISO) </td></tr>
<tr>
<td align="center">Button (optional) </td><td align="center">GPIO14 </td><td align="center">D5 (SCK) </td></tr>
<tr>
<td align="center">LED (Not used) </td><td align="center">GPIO2 </td><td align="center">D4 </td></tr>
<tr>
<td align="center">GND </td><td align="center">GND </td><td align="center">GND </td></tr>
</table>
<p><b>Note:</b> An external pull-up resistor is required when a pin does not have an internal pull-up.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;// Connect the rotary pins to the WeMos D1 R2 board:</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#define ROTARY_PIN1         12</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;#define ROTARY_PIN2         13</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;#define ROTARY_BUTTON_PIN   14</div></div><!-- fragment --><h2>Examples</h2>
<p>The following examples are available:</p><ul>
<li>Rotary | Interrupt | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Interrupt/InterruptFullStepBasic/InterruptFullStepBasic.ino">InterruptFullStepBasic</a></li>
<li>Rotary | Interrupt | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Interrupt/InterruptFullStepButton/InterruptFullStepButton.ino">InterruptFullStepButton</a></li>
<li>Rotary | Interrupt | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Interrupt/InterruptFullStepCounter/InterruptFullStepCounter.ino">InterruptFullStepCounter</a></li>
<li>Rotary | Polled | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Polled/PolledFullStepBasic/PolledFullStepBasic.ino">PolledFullStepBasic</a></li>
<li>Rotary | Polled | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Polled/PolledFullStepButton/PolledFullStepButton.ino">PolledFullStepButton</a></li>
<li>Rotary | Polled | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Polled/PolledFullStepCounter/PolledFullStepCounter.ino">PolledFullStepCounter</a></li>
<li>Rotary | Polled | <a href="https://github.com/Erriez/ErriezRotary/blob/master/examples/Polled/PolledFullStepMultiple/PolledFullStepMultiple.ino">PolledFullStepMultiple</a></li>
</ul>
<h2>Documentation</h2>
<ul>
<li><a href="https://Erriez.github.io/ErriezRotaryEncoderFullStep">Doxygen online HTML</a></li>
<li><a href="https://github.com/Erriez/ErriezRotaryEncoderFullStep/raw/gh-pages/latex/ErriezRotaryEncoderFullStep.pdf">Doxygen PDF</a></li>
</ul>
<h2>Usage</h2>
<p><b>Read rotary with polling</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#include &lt;ErriezRotaryFullStep.h&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;// Connect rotary pins to the DIGITAL pins of the Arduino board</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;#define ROTARY_PIN1   2</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;#define ROTARY_PIN2   3</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;// Enable ONE of the three constructors below with different number of arguments:</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;// Initialize full step rotary encoder, default pull-up enabled, default </div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;// sensitive=100</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2);</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;// Or initialize full step rotary encoder, pull-up disabled, default sensitive=100</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;// RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2, false);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;// Or initialize full step rotary encoder, pull-up enabled, sensitive 1..255</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;// A higher value is more sensitive</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;// RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2, true, 150);</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;void loop()</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  int rotaryState = rotary.read();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  // rotaryState = -3: Counter clockwise turn, multiple notches fast</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  // rotaryState = -2: Counter clockwise turn, multiple notches</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  // rotaryState = -1: Counter clockwise turn, single notch</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  // rotaryState = 0:  No change</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  // rotaryState = 1:  Clockwise turn, single notch</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  // rotaryState = 2:  Clockwise turn, multiple notches</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  // rotaryState = 3:  Clockwise turn, multiple notches fast</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div></div><!-- fragment --><p><b>Read rotary with interrupts</b></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#include &lt;ErriezRotaryFullStep.h&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;// Connect rotary pins to Arduino DIGITAL pins with interrupt support:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;//</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;// +-----------------------------------+--------------------------+</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;// |              Board                |  DIGITAL interrupt pins  |</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;// +-----------------------------------+--------------------------+</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;// | Uno, Nano, Mini, other 328-based  |  2, 3                    |</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;// | Mega, Mega2560, MegaADK           |  2, 3, 18, 19, 20, 21    |</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;// | Micro, Leonardo, other 32u4-based |  0, 1, 2, 3, 7           |</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;// +-----------------------------------+--------------------------+</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;//</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;#define ROTARY_PIN1   2</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;#define ROTARY_PIN2   3</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;// Enable ONE of the three constructors below with different number of arguments:</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;// Initialize full step rotary encoder, default pull-up enabled, default </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;// sensitive=100</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;// Or initialize full step rotary encoder, pull-up disabled, default sensitive=100</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;// RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2, false);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;// Or initialize full step rotary encoder, pull-up enabled, sensitive 1..255</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;// A higher value is more sensitive</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;// RotaryFullStep rotary(ROTARY_PIN1, ROTARY_PIN2, true, 150);</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;void setup()</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  // Initialize pin change interrupt on both rotary encoder pins</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  attachInterrupt(digitalPinToInterrupt(ROTARY_PIN1), rotaryInterrupt, CHANGE);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  attachInterrupt(digitalPinToInterrupt(ROTARY_PIN2), rotaryInterrupt, CHANGE);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;void rotaryInterrupt()</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  int rotaryState = rotary.read();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  // rotaryState = -3: Counter clockwise turn, multiple notches fast</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  // rotaryState = -2: Counter clockwise turn, multiple notches</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  // rotaryState = -1: Counter clockwise turn, single notch</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  // rotaryState = 0:  No change</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  // rotaryState = 1:  Clockwise turn, single notch</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  // rotaryState = 2:  Clockwise turn, multiple notches</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  // rotaryState = 3:  Clockwise turn, multiple notches fast</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div></div><!-- fragment --><h2>Library dependencies</h2>
<ul>
<li>None.</li>
</ul>
<h2>Library installation</h2>
<p>Please refer to the <a href="https://github.com/Erriez/ErriezArduinoLibrariesAndSketches/wiki">Wiki</a> page.</p>
<h2>Other Arduino Libraries and Sketches from Erriez</h2>
<ul>
<li><a href="https://github.com/Erriez/ErriezArduinoLibrariesAndSketches">Erriez Libraries and Sketches</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
